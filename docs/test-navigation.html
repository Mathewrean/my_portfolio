<!DOCTYPE html>
<html>
<head>
  <title>Navigation Link Test</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
    .test { 
      background: white; 
      padding: 15px; 
      margin: 10px 0; 
      border-radius: 5px;
      border-left: 4px solid #10a37f;
    }
    .success { border-left-color: #47b881; background: #e8f5e9; }
    .failure { border-left-color: #e74c3c; background: #fadbd8; }
    h2 { color: #333; }
    code { background: #f0f0f0; padding: 2px 6px; border-radius: 3px; }
    .result { margin-top: 8px; padding: 8px; background: #fafafa; border-radius: 3px; }
  </style>
</head>
<body>
  <h1>✓ Navigation Link Test Suite</h1>
  
  <div id="tests"></div>

  <script>
    // The navigation initialization logic to test
    function testNavigationLogic(currentPathname, dataHref) {
      const isNested = currentPathname.includes('/components/');
      let newHref;
      
      if (isNested) {
        if (dataHref === 'index.html') {
          newHref = '../index.html';
        } else if (dataHref.startsWith('components/')) {
          newHref = dataHref.replace('components/', '');
        } else {
          newHref = dataHref;
        }
      } else {
        newHref = dataHref;
      }
      
      return { newHref, isNested };
    }

    // Test cases
    const testCases = [
      // From root tests
      {
        name: "From root: Home link",
        path: "/my_portfolio/docs/index.html",
        dataHref: "index.html",
        expected: "index.html"
      },
      {
        name: "From root: Resume link",
        path: "/my_portfolio/docs/index.html",
        dataHref: "components/Resume.html",
        expected: "components/Resume.html"
      },
      {
        name: "From root: About link",
        path: "/my_portfolio/docs/index.html",
        dataHref: "components/About.html",
        expected: "components/About.html"
      },
      // From nested tests
      {
        name: "From Resume page: Home link",
        path: "/my_portfolio/docs/components/Resume.html",
        dataHref: "index.html",
        expected: "../index.html"
      },
      {
        name: "From Resume page: About link",
        path: "/my_portfolio/docs/components/Resume.html",
        dataHref: "components/About.html",
        expected: "About.html"
      },
      {
        name: "From Resume page: Projects link",
        path: "/my_portfolio/docs/components/Resume.html",
        dataHref: "components/Projects.html",
        expected: "Projects.html"
      },
      {
        name: "From Challenges page: Home link",
        path: "/my_portfolio/docs/components/Challenges.html",
        dataHref: "index.html",
        expected: "../index.html"
      },
      {
        name: "From Challenges page: Resume link",
        path: "/my_portfolio/docs/components/Challenges.html",
        dataHref: "components/Resume.html",
        expected: "Resume.html"
      }
    ];

    // Run tests
    let passCount = 0;
    let failCount = 0;
    let html = '';

    testCases.forEach(test => {
      const result = testNavigationLogic(test.path, test.dataHref);
      const passed = result.newHref === test.expected;
      
      if (passed) passCount++;
      else failCount++;

      html += `
        <div class="test ${passed ? 'success' : 'failure'}">
          <h3>${passed ? '✓' : '✗'} ${test.name}</h3>
          <div class="result">
            <p><strong>Path:</strong> <code>${test.path}</code></p>
            <p><strong>Data Href:</strong> <code>${test.dataHref}</code></p>
            <p><strong>Expected:</strong> <code>${test.expected}</code></p>
            <p><strong>Got:</strong> <code>${result.newHref}</code></p>
            <p><strong>Is Nested:</strong> ${result.isNested ? 'Yes' : 'No'}</p>
          </div>
        </div>
      `;
    });

    html = `<div style="margin-bottom: 20px; padding: 15px; background: ${failCount === 0 ? '#e8f5e9' : '#fadbd8'}; border-radius: 5px; border: 2px solid ${failCount === 0 ? '#47b881' : '#e74c3c'};">
      <h2 style="margin-top: 0;">Test Results: ${passCount} passed, ${failCount} failed out of ${testCases.length}</h2>
      ${failCount === 0 ? '<p style="color: #47b881; font-weight: bold;">✓ All navigation tests passed!</p>' : '<p style="color: #e74c3c; font-weight: bold;">✗ Some tests failed. Check details below.</p>'}
    </div>` + html;

    document.getElementById('tests').innerHTML = html;

    // Additional info
    console.log(`Navigation test results: ${passCount} passed, ${failCount} failed`);
  </script>
</body>
</html>
