<nav class="navbar">
  <div class="nav-container">
    <div class="nav-brand">
      <a href="#" class="brand-link" data-href="index.html" data-page="index.html">
        <i class="fas fa-shield-alt"></i>
        <span>Mathewrean Otieno</span>
      </a>
    </div>
    <ul class="nav-menu">
      <li class="nav-item">
        <a href="#" class="nav-link" data-href="index.html" data-page="index.html">
          <i class="fas fa-home"></i>
          <span>Home</span>
        </a>
      </li>
      <li class="nav-item">
        <a href="#" class="nav-link" data-href="components/About.html" data-page="About.html">
          <i class="fas fa-user"></i>
          <span>About</span>
        </a>
      </li>
      <li class="nav-item">
        <a href="#" class="nav-link" data-href="components/Resume.html" data-page="Resume.html">
          <i class="fas fa-file-alt"></i>
          <span>Resume</span>
        </a>
      </li>
      <li class="nav-item">
        <a href="#" class="nav-link" data-href="components/Projects.html" data-page="Projects.html">
          <i class="fas fa-laptop-code"></i>
          <span>Projects</span>
        </a>
      </li>
      <li class="nav-item">
        <a href="#" class="nav-link" data-href="components/Challenges.html" data-page="Challenges.html">
          <i class="fas fa-flag"></i>
          <span>Challenges</span>
        </a>
      </li>
      <li class="nav-item">
        <a href="#" class="nav-link" data-href="components/Contacts.html" data-page="Contacts.html">
          <i class="fas fa-envelope"></i>
          <span>Contact</span>
        </a>
      </li>
    </ul>
  </div>
</nav>

<script>
function initializeNavigation() {
  const navLinks = document.querySelectorAll('.nav-link');
  const brandLink = document.querySelector('.brand-link');
  const allLinks = document.querySelectorAll('[data-href]');

  // Determine if we're in a nested directory
  const isNested = window.location.pathname.includes('/components/');
  
  // Set proper href attributes
  allLinks.forEach((link) => {
    let target = link.getAttribute('data-href');
    let newHref;
    
    if (isNested) {
      // We're in a component page (components/Resume.html, etc.)
      if (target === 'index.html') {
        newHref = '../index.html';
      } else if (target.startsWith('components/')) {
        newHref = target.replace('components/', '');
      } else {
        newHref = target;
      }
    } else {
      // We're at the root (index.html)
      newHref = target;
    }
    
    // Set the href so links are clickable
    link.setAttribute('href', newHref);
  });

  // Get current page filename
  let currentPage = window.location.pathname.split('/').pop();
  if (!currentPage || currentPage === '') {
    currentPage = 'index.html';
  }

  // Highlight active link based on data-page attribute
  navLinks.forEach(link => {
    const dataPage = link.getAttribute('data-page');
    if (dataPage === currentPage) {
      link.classList.add('active');
    }
  });
}

// Initialize when DOM is ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initializeNavigation);
} else {
  initializeNavigation();
}
</script>
