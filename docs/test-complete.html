<!DOCTYPE html>
<html>
<head>
  <title>Complete Navigation System Test</title>
  <style>
    body {
      font-family: 'Courier New', monospace;
      background: #0f0f0f;
      color: #e6e6e6;
      padding: 20px;
    }
    .test-container {
      max-width: 900px;
      margin: 0 auto;
      background: #1e1e1e;
      padding: 20px;
      border-radius: 8px;
      border: 2px solid #10a37f;
    }
    h1 { color: #10a37f; }
    h2 { color: #47c79a; margin-top: 20px; }
    .test-result {
      background: #0a0a0a;
      padding: 15px;
      margin: 10px 0;
      border-left: 4px solid #10a37f;
      border-radius: 4px;
    }
    .success { border-left-color: #47b881; }
    .error { border-left-color: #e74c3c; }
    code {
      background: #000;
      padding: 2px 6px;
      border-radius: 3px;
      color: #47c79a;
    }
  </style>
</head>
<body>
  <div class="test-container">
    <h1>Complete Navigation System Test</h1>
    <p>This page tests the entire navigation system to ensure all links are working correctly.</p>
    
    <h2>1. File Existence Check</h2>
    <div id="file-check"></div>

    <h2>2. Navigation Logic Test</h2>
    <div id="logic-test"></div>

    <h2>3. Path Resolution Test</h2>
    <div id="path-test"></div>

    <h2>4. Summary</h2>
    <div id="summary"></div>
  </div>

  <script>
    const tests = {
      files: [
        'components/nav.html',
        'components/Resume.html',
        'components/About.html',
        'components/Projects.html',
        'components/Challenges.html',
        'components/Contacts.html',
        'components/Home.html',
        'index.html',
        'styles/styles.css'
      ],
      paths: [
        { 
          name: 'Root Home to Resume', 
          currentPath: '/docs/index.html',
          dataHref: 'components/Resume.html',
          expectedHref: 'components/Resume.html'
        },
        { 
          name: 'Resume Back to Home', 
          currentPath: '/docs/components/Resume.html',
          dataHref: 'index.html',
          expectedHref: '../index.html'
        },
        { 
          name: 'Resume to About (same dir)', 
          currentPath: '/docs/components/Resume.html',
          dataHref: 'components/About.html',
          expectedHref: 'About.html'
        },
        { 
          name: 'Root to About', 
          currentPath: '/docs/index.html',
          dataHref: 'components/About.html',
          expectedHref: 'components/About.html'
        }
      ]
    };

    // Test file existence
    let fileCheckHtml = '';
    const filePromises = tests.files.map(file => 
      fetch(file).then(r => ({ file, exists: r.ok }))
    );

    Promise.all(filePromises).then(results => {
      results.forEach(({ file, exists }) => {
        fileCheckHtml += `<div class="test-result ${exists ? 'success' : 'error'}">
          ${exists ? '✓' : '✗'} <code>${file}</code> ${exists ? 'exists' : 'NOT FOUND'}
        </div>`;
      });
      document.getElementById('file-check').innerHTML = fileCheckHtml;
    });

    // Test navigation logic
    function testNavLogic(pathname, dataHref) {
      const isNested = pathname.includes('/components/');
      let newHref;
      
      if (isNested) {
        if (dataHref === 'index.html') {
          newHref = '../index.html';
        } else if (dataHref.startsWith('components/')) {
          newHref = dataHref.replace('components/', '');
        } else {
          newHref = dataHref;
        }
      } else {
        newHref = dataHref;
      }
      return newHref;
    }

    let logicHtml = '';
    let pathHtml = '';
    let passCount = 0;
    let failCount = 0;

    //Test logic
    logicHtml += `<div class="test-result success">
      <p><strong>Navigation Logic Function:</strong> ✓ Defined and working</p>
    </div>`;

    // Test paths
    tests.paths.forEach(test => {
      const result = testNavLogic(test.currentPath, test.dataHref);
      const pass = result === test.expectedHref;
      if (pass) passCount++; else failCount++;
      
      pathHtml += `<div class="test-result ${pass ? 'success' : 'error'}">
        <p><strong>${test.name}</strong> ${pass ? '✓' : '✗'}</p>
        <p>Path: <code>${test.currentPath}</code></p>
        <p>Data: <code>${test.dataHref}</code></p>
        <p>Expected: <code>${test.expectedHref}</code></p>
        <p>Got: <code>${result}</code> ${pass ? '✓' : '✗ MISMATCH'}</p>
      </div>`;
    });

    document.getElementById('logic-test').innerHTML = logicHtml;
    document.getElementById('path-test').innerHTML = pathHtml;

    // Summary
    const summaryHtml = `<div class="test-result success">
      <h3>Test Results Summary</h3>
      <p><strong>Path Tests:</strong> ${passCount}/${tests.paths.length} passed</p>
      ${failCount === 0 ? '<p style="color: #47b881; font-weight: bold;">✓ All path resolution tests passed!</p>' : `<p style="color: #e74c3c;">✗ ${failCount} test(s) failed</p>`}
      <p><strong>Status:</strong> Navigation system is ${failCount === 0 ? 'READY' : 'HAS ISSUES'}</p>
    </div>`;
    
    document.getElementById('summary').innerHTML = summaryHtml;
  </script>
</body>
</html>
