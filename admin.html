<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Portfolio Admin Dashboard</title>
  <meta name="referrer" content="strict-origin-when-cross-origin" />
  <link rel="stylesheet" href="assets/css/main.css" />
  <script defer src="assets/js/admin.js"></script>
</head>
<body>
  <button id="themeToggle" class="floating-theme-toggle" aria-label="Toggle dark and light mode" title="Toggle theme">‚óê</button>

  <div id="authGate" class="auth-gate">
    <section class="view-section active" style="max-width: 420px; width: 100%;">
      <h2>Admin Login</h2>
      <p class="muted">Secure area for portfolio content management.</p>
      <form id="authForm" class="stack">
        <label>Password
          <input id="adminPassphrase" type="password" required autocomplete="current-password" />
        </label>
        <button class="btn btn-primary" type="submit">Sign In</button>
      </form>
      <p id="authMessage" class="muted"></p>
    </section>
  </div>

  <div id="adminApp" class="admin-layout" hidden>
    <aside class="admin-sidebar">
      <h1>Admin</h1>
      <nav class="admin-menu">
        <button class="admin-nav-btn active" data-panel="challenges">Challenges</button>
        <button class="admin-nav-btn" data-panel="certificates">Certificates</button>
        <button class="admin-nav-btn" data-panel="projects">Projects</button>
        <button class="admin-nav-btn" data-panel="research">Research</button>
        <button class="admin-nav-btn" data-panel="gallery">Gallery</button>
        <button class="admin-nav-btn" data-panel="settings">Settings</button>
      </nav>
    </aside>

    <section class="admin-main">
      <header class="admin-topbar">
        <h2 id="panelTitle">Challenges</h2>
        <button id="logoutBtn" class="btn">Logout</button>
      </header>

      <div id="toast" class="toast" hidden></div>

      <section class="admin-panel active" data-panel="challenges">
        <div class="toolbar">
          <input id="challengeSearch" type="search" placeholder="Search challenges" />
          <select id="challengeCategoryFilter">
            <option value="">All categories</option>
            <option value="tryhackme">TryHackMe</option>
            <option value="hackthebox">HackTheBox</option>
            <option value="picoctf">PicoCTF</option>
            <option value="ctfroom">CTFROOM</option>
            <option value="ctfzone">CTFZone</option>
            <option value="others">Others</option>
          </select>
          <select id="challengeStatusFilter">
            <option value="">All status</option>
            <option value="Completed">Completed</option>
            <option value="Ongoing">Ongoing</option>
          </select>
          <button id="challengeFilterBtn" class="btn">Apply</button>
        </div>
        <div class="table-wrap"><table><thead><tr><th>Title</th><th>Category</th><th>Status</th><th>Difficulty</th><th>Published</th><th>Actions</th></tr></thead><tbody id="challengesTable"></tbody></table></div>
        <div class="toolbar"><button id="challengePrev" class="btn">Prev</button><span id="challengePageInfo" class="muted"></span><button id="challengeNext" class="btn">Next</button></div>

        <details open class="admin-card"><summary>Add / Edit Challenge</summary>
          <form id="challengeForm" class="form-grid" enctype="multipart/form-data">
            <input type="hidden" id="challengeId" />
            <label>Title<input id="challengeTitle" required /></label>
            <label>Category
              <select id="challengeCategory" required>
                <option value="tryhackme">TryHackMe</option><option value="hackthebox">HackTheBox</option><option value="picoctf">PicoCTF</option><option value="ctfroom">CTFROOM</option><option value="ctfzone">CTFZone</option><option value="others">Others</option>
              </select>
            </label>
            <label>Platform<input id="challengePlatform" placeholder="CTFZone" /></label>
            <label>Difficulty<input id="challengeDifficulty" placeholder="Easy/Medium/Hard" /></label>
            <label>Status<select id="challengeStatus"><option>Completed</option><option>Ongoing</option></select></label>
            <label>Date completed<input id="challengeDate" type="date" /></label>
            <label>Tags (comma separated)<input id="challengeTags" /></label>
            <label>Medium link<input id="challengeMedium" type="url" /></label>
            <label>GitHub link<input id="challengeGithub" type="url" /></label>
            <label>Live link<input id="challengeLive" type="url" /></label>
            <label>Source site (others)<input id="challengeSource" /></label>
            <label>CTF name<input id="challengeCtfName" /></label>
            <label class="full">Description (Rich text)
              <div id="challengeDescriptionEditor" class="rich-editor" contenteditable="true"></div>
            </label>
            <label>Badge thumbnail<input id="challengeBadge" type="file" accept=".jpg,.jpeg,.png,.webp" /></label>
            <label>Main image<input id="challengeImage" type="file" accept=".jpg,.jpeg,.png,.webp" /></label>
            <label>Screenshots (multiple)<input id="challengeScreens" type="file" multiple accept=".jpg,.jpeg,.png,.webp" /></label>
            <label>Attachments<input id="challengeAttachments" type="file" multiple accept=".pdf,.jpg,.jpeg,.png,.webp" /></label>
            <label>Published<select id="challengePublished"><option value="1">Yes</option><option value="0">No</option></select></label>
            <div class="full toolbar">
              <button class="btn btn-primary" type="submit">Save Challenge</button>
              <button class="btn" type="button" id="challengeReset">Reset</button>
            </div>
          </form>
        </details>
      </section>

      <section class="admin-panel" data-panel="certificates">
        <div class="table-wrap"><table><thead><tr><th>Title</th><th>Issuer</th><th>Date</th><th>Published</th><th>Actions</th></tr></thead><tbody id="certTable"></tbody></table></div>
        <details open class="admin-card"><summary>Add / Edit Certificate</summary>
          <form id="certForm" class="form-grid" enctype="multipart/form-data">
            <input type="hidden" id="certId" />
            <label>Title<input id="certTitle" required /></label>
            <label>Issuer<input id="certIssuer" required /></label>
            <label>Date<input id="certDate" type="date" /></label>
            <label>Credential ID<input id="certCredential" /></label>
            <label>Verification link<input id="certVerify" type="url" /></label>
            <label>Certificate file/image<input id="certImage" type="file" accept=".pdf,.jpg,.jpeg,.png,.webp" /></label>
            <label>Published<select id="certPublished"><option value="1">Yes</option><option value="0">No</option></select></label>
            <div class="full toolbar"><button class="btn btn-primary" type="submit">Save Certificate</button><button class="btn" type="button" id="certReset">Reset</button></div>
          </form>
        </details>
      </section>

      <section class="admin-panel" data-panel="projects">
        <div class="table-wrap"><table><thead><tr><th>Title</th><th>Tech</th><th>Published</th><th>Actions</th></tr></thead><tbody id="projectsTable"></tbody></table></div>
        <details open class="admin-card"><summary>Add / Edit Project</summary>
          <form id="projectForm" class="form-grid" enctype="multipart/form-data">
            <input type="hidden" id="projectId" />
            <label>Title<input id="projectTitle" required /></label>
            <label>Technologies (comma separated)<input id="projectTech" /></label>
            <label>GitHub link<input id="projectGithub" type="url" /></label>
            <label>Live link<input id="projectLive" type="url" /></label>
            <label>Image<input id="projectImage" type="file" accept=".jpg,.jpeg,.png,.webp" /></label>
            <label class="full">Description<textarea id="projectDescription" rows="4" required></textarea></label>
            <label>Published<select id="projectPublished"><option value="1">Yes</option><option value="0">No</option></select></label>
            <div class="full toolbar"><button class="btn btn-primary" type="submit">Save Project</button><button class="btn" type="button" id="projectReset">Reset</button></div>
          </form>
        </details>
      </section>

      <section class="admin-panel" data-panel="research">
        <div class="table-wrap"><table><thead><tr><th>Title</th><th>Date</th><th>Published</th><th>Actions</th></tr></thead><tbody id="researchTable"></tbody></table></div>
        <details open class="admin-card"><summary>Add / Edit Research</summary>
          <form id="researchForm" class="form-grid" enctype="multipart/form-data">
            <input type="hidden" id="researchId" />
            <label>Title<input id="researchTitle" required /></label>
            <label>Date<input id="researchDate" type="date" /></label>
            <label>Link<input id="researchLink" type="url" /></label>
            <label>Upload PDF/Image<input id="researchAttachment" type="file" accept=".pdf,.jpg,.jpeg,.png,.webp" /></label>
            <label class="full">Description<textarea id="researchDescription" rows="4" required></textarea></label>
            <label>Published<select id="researchPublished"><option value="1">Yes</option><option value="0">No</option></select></label>
            <div class="full toolbar"><button class="btn btn-primary" type="submit">Save Research</button><button class="btn" type="button" id="researchReset">Reset</button></div>
          </form>
        </details>
      </section>

      <section class="admin-panel" data-panel="gallery">
        <div class="table-wrap"><table><thead><tr><th>Caption</th><th>Date</th><th>Published</th><th>Actions</th></tr></thead><tbody id="galleryTable"></tbody></table></div>
        <details open class="admin-card"><summary>Add / Edit Gallery Item</summary>
          <form id="galleryForm" class="form-grid" enctype="multipart/form-data">
            <input type="hidden" id="galleryId" />
            <label>Caption<input id="galleryCaption" /></label>
            <label>Date<input id="galleryDate" type="date" /></label>
            <label>Image<input id="galleryImage" type="file" accept=".jpg,.jpeg,.png,.webp" required /></label>
            <label>Published<select id="galleryPublished"><option value="1">Yes</option><option value="0">No</option></select></label>
            <div class="full toolbar"><button class="btn btn-primary" type="submit">Save Gallery Item</button><button class="btn" type="button" id="galleryReset">Reset</button></div>
          </form>
        </details>
      </section>

      <section class="admin-panel" data-panel="settings">
        <details open class="admin-card"><summary>Site Settings</summary>
          <form id="siteSettingsForm" class="form-grid">
            <label class="full">Hero Title<input id="siteHeroTitle" /></label>
            <label class="full">Hero Summary<textarea id="siteHeroSummary" rows="2"></textarea></label>
            <label class="full">About<textarea id="siteAbout" rows="4"></textarea></label>
            <label class="full">Contact Links JSON<textarea id="siteContact" rows="5" placeholder='[{"label":"Email","href":"mailto:..."}]'></textarea></label>
            <label>TryHackMe profile URL<input id="thmProfileUrl" type="url" /></label>
            <label>TryHackMe badge image URL<input id="thmBadgeImage" type="url" /></label>
            <div class="full toolbar"><button class="btn btn-primary" type="submit">Save Site Settings</button></div>
          </form>
        </details>
      </section>
    </section>
  </div>
</body>
</html>
